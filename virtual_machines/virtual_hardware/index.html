
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for KubeVirt">
      
      
      
        <link rel="canonical" href="https://kubevirt.io/user-guide/virtual_machines/virtual_hardware/">
      
      
        <link rel="prev" href="../presets/">
      
      
        <link rel="next" href="../dedicated_cpu_resources/">
      
      
      <link rel="icon" href="../../assets/favicon32x32.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.7">
    
    
      
        <title>Virtual hardware - KubeVirt user guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#virtual-hardware" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="KubeVirt user guide" class="md-header__button md-logo" aria-label="KubeVirt user guide" data-md-component="logo">
      
  <img src="../../assets/KubeVirt_icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KubeVirt user guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Virtual hardware
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../architecture/" class="md-tabs__link">
        
  
    
  
  Architecture

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../quickstarts/" class="md-tabs__link">
        
  
    
  
  Quickstarts

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../operations/installation/" class="md-tabs__link">
          
  
  Operations

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../virtual_machine_instances/" class="md-tabs__link">
          
  
  Virtual Machines

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../release_notes/" class="md-tabs__link">
        
  
    
  
  Release Notes

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="KubeVirt user guide" class="md-nav__button md-logo" aria-label="KubeVirt user guide" data-md-component="logo">
      
  <img src="../../assets/KubeVirt_icon.png" alt="logo">

    </a>
    KubeVirt user guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstarts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstarts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Operations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Operations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/updating_and_deletion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Updating and deletion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/basic_use/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic use
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/customize_components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/api_validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/virtctl_client_tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Download and Install the virtctl Command Line Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/live_migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Live Migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/hotplug_interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hotplug Network Interfaces
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/hotplug_volumes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hotplug Volumes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/client_passthrough/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client Passthrough
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/snapshot_restore_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Snapshot Restore API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/scheduler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KubeVirt Scheduler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/hugepages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hugepages support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/component_monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Component monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/authorization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authorization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/annotations_and_labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotations and labels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/node_assignment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node assignment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/node_maintenance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node maintenance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/node_overcommit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node overcommit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/unresponsive_nodes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unresponsive nodes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/containerized_data_importer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containerized Data Importer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/activating_feature_gates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activating feature gates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/export_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Export API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/clone_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clone API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/memory_dump/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual machine memory dump
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/mediated_devices_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mediated devices and virtual GPUs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/migration_policies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration Policies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/ksm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KSM Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/gitops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing KubeVirt with GitOps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/operations_on_Arm64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arm64 Operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/feature_gate_status_on_Arm64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feature Gate Status on Arm64
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Virtual Machines
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Virtual Machines
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../virtual_machine_instances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Machines Instances
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../creating_vms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating VirtualMachines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../lifecycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../run_strategies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run Strategies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../instancetypes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instance types and preferences
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../presets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Virtual hardware
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Virtual hardware
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#machine-type" class="md-nav__link">
    Machine Type
  </a>
  
    <nav class="md-nav" aria-label="Machine Type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#biosuefi" class="md-nav__link">
    BIOS/UEFI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smbios-firmware" class="md-nav__link">
    SMBIOS Firmware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    CPU
  </a>
  
    <nav class="md-nav" aria-label="CPU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topology" class="md-nav__link">
    Topology
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-cpu-compatibility-enforcement" class="md-nav__link">
    Enabling cpu compatibility enforcement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labeling-nodes-with-cpu-models-and-cpu-features" class="md-nav__link">
    Labeling nodes with cpu models and cpu features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model" class="md-nav__link">
    Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-default-cluster-cpu-model" class="md-nav__link">
    Enabling default cluster cpu model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-model-special-cases" class="md-nav__link">
    CPU model special cases
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clock" class="md-nav__link">
    Clock
  </a>
  
    <nav class="md-nav" aria-label="Clock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#guest-time" class="md-nav__link">
    Guest time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utc" class="md-nav__link">
    utc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timezone" class="md-nav__link">
    timezone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timers" class="md-nav__link">
    Timers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-number-generator-rng" class="md-nav__link">
    Random number generator (RNG)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#video-and-graphics-device" class="md-nav__link">
    Video and Graphics Device
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#features_1" class="md-nav__link">
    Features
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources-requests-and-limits" class="md-nav__link">
    Resources Requests and Limits
  </a>
  
    <nav class="md-nav" aria-label="Resources Requests and Limits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu_1" class="md-nav__link">
    CPU
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-overhead" class="md-nav__link">
    Memory Overhead
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hugepages" class="md-nav__link">
    Hugepages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-devices" class="md-nav__link">
    Input Devices
  </a>
  
    <nav class="md-nav" aria-label="Input Devices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablet" class="md-nav__link">
    Tablet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dedicated_cpu_resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dedicated CPU resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../numa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NUMA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../disks_and_volumes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filesystems, Disks and Volumes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces_and_networks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interfaces and Networks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../istio_service_mesh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Istio service mesh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../networkpolicy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NetworkPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../host-devices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Host Devices Assignment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../windows_virtio_drivers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows virtio drivers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../guest_operating_system_information/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guest Operating System Information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../guest_agent_information/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guest Agent information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../liveness_and_readiness_probes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Liveness and Readiness Probes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../accessing_virtual_machines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing Virtual Machines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../startup_scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Startup Scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../service_objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tekton_tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KubeVirt Tekton
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../replicaset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VirtualMachineInstanceReplicaSet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VirtualMachinePool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DNS records
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../boot_from_external_source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Booting From External Source
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../confidential_computing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Confidential computing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../vsock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VSOCK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../virtual_machines_on_Arm64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Machines on Arm64
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../device_status_on_Arm64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Device Status on Arm64
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../persistent_tpm_and_uefi_state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Persistent TPM and UEFI state
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../resources_requests_and_limits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resources requests and limits
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#machine-type" class="md-nav__link">
    Machine Type
  </a>
  
    <nav class="md-nav" aria-label="Machine Type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#biosuefi" class="md-nav__link">
    BIOS/UEFI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smbios-firmware" class="md-nav__link">
    SMBIOS Firmware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    CPU
  </a>
  
    <nav class="md-nav" aria-label="CPU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topology" class="md-nav__link">
    Topology
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-cpu-compatibility-enforcement" class="md-nav__link">
    Enabling cpu compatibility enforcement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labeling-nodes-with-cpu-models-and-cpu-features" class="md-nav__link">
    Labeling nodes with cpu models and cpu features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model" class="md-nav__link">
    Model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-default-cluster-cpu-model" class="md-nav__link">
    Enabling default cluster cpu model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-model-special-cases" class="md-nav__link">
    CPU model special cases
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clock" class="md-nav__link">
    Clock
  </a>
  
    <nav class="md-nav" aria-label="Clock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#guest-time" class="md-nav__link">
    Guest time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utc" class="md-nav__link">
    utc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timezone" class="md-nav__link">
    timezone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timers" class="md-nav__link">
    Timers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-number-generator-rng" class="md-nav__link">
    Random number generator (RNG)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#video-and-graphics-device" class="md-nav__link">
    Video and Graphics Device
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#features_1" class="md-nav__link">
    Features
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources-requests-and-limits" class="md-nav__link">
    Resources Requests and Limits
  </a>
  
    <nav class="md-nav" aria-label="Resources Requests and Limits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu_1" class="md-nav__link">
    CPU
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-overhead" class="md-nav__link">
    Memory Overhead
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hugepages" class="md-nav__link">
    Hugepages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-devices" class="md-nav__link">
    Input Devices
  </a>
  
    <nav class="md-nav" aria-label="Input Devices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablet" class="md-nav__link">
    Tablet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/kubevirt/user-guide/edit/main/docs/virtual_machines/virtual_hardware.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/kubevirt/user-guide/raw/main/docs/virtual_machines/virtual_hardware.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="virtual-hardware">Virtual hardware<a class="headerlink" href="#virtual-hardware" title="Permanent link">&para;</a></h1>
<p>Fine-tuning different aspects of the hardware which are not device
related (BIOS, mainboard, etc.) is sometimes necessary to allow guest
operating systems to properly boot and reboot.</p>
<h2 id="machine-type">Machine Type<a class="headerlink" href="#machine-type" title="Permanent link">&para;</a></h2>
<p>QEMU is able to work with two different classes of chipsets for x86_64,
so called machine types. The x86_64 chipsets are i440fx (also called
pc) and q35. They are versioned based on qemu-system-${ARCH},
following the format <code>pc-${machine_type}-${qemu_version}</code>,
e.g.<code>pc-i440fx-2.10</code> and <code>pc-q35-2.10</code>.</p>
<p>KubeVirt defaults to QEMU's newest q35 machine type. If a custom machine
type is desired, it is configurable through the following structure:</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    machine:
      # This value indicates QEMU machine type.
      type: pc-q35-2.10
    resources:
      requests:
        memory: 512M
    devices:
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimName: myclaim
</code></pre></div>
<p>Comparison of the machine types' internals can be found <a href="https://wiki.qemu.org/Features/Q35">at QEMU
wiki</a>.</p>
<h3 id="biosuefi">BIOS/UEFI<a class="headerlink" href="#biosuefi" title="Permanent link">&para;</a></h3>
<p>All virtual machines use BIOS by default for booting.</p>
<p>It is possible to utilize UEFI/OVMF by setting a value via
<code>spec.firmware.bootloader</code>:</p>
<div class="highlight"><pre><span></span><code>apiVersion: kubevirt.io/v1
kind: VirtualMachineInstance
metadata:
  labels:
    special: vmi-alpine-efi
  name: vmi-alpine-efi
spec:
  domain:
    devices:
      disks:
      - disk:
          bus: virtio
        name: containerdisk
      features:
        smm:
          enabled: true
    firmware:
      # this sets the bootloader type
      bootloader:
        efi: {}
</code></pre></div>
<p>Enabling EFI automatically enables <a href="https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-secure-boot">Secure Boot</a>,
unless the <code>secureBoot</code> field under <code>efi</code> is set to <code>false</code>.<br />
Secure Boot itself requires the <a href="https://en.wikipedia.org/wiki/System_Management_Mode">SMM</a>
CPU feature to be enabled as above, which does not happen automatically,
for security reasons.</p>
<h3 id="smbios-firmware">SMBIOS Firmware<a class="headerlink" href="#smbios-firmware" title="Permanent link">&para;</a></h3>
<p>In order to provide a consistent view on the virtualized hardware for
the guest OS, the SMBIOS UUID can be set to a constant value via
<code>spec.firmware.uuid</code>:</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    firmware:
      # this sets the UUID
      uuid: 5d307ca9-b3ef-428c-8861-06e72d69f223
      serial: e4686d2c-6e8d-4335-b8fd-81bee22f4815
    resources:
      requests:
        memory: 512M
    devices:
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimName: myclaim
</code></pre></div>
<p>In addition, the SMBIOS serial number can be set to a constant value via
<code>spec.firmware.serial</code>, as demonstrated above.</p>
<h3 id="cpu">CPU<a class="headerlink" href="#cpu" title="Permanent link">&para;</a></h3>
<p><strong>Note</strong>: This is not related to scheduling decisions or resource
assignment.</p>
<h4 id="topology">Topology<a class="headerlink" href="#topology" title="Permanent link">&para;</a></h4>
<p>Setting the number of CPU cores is possible via <code>spec.domain.cpu.cores</code>.
The following VM will have a CPU with <code>3</code> cores:</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    cpu:
      # this sets the cores
      cores: 3
    resources:
      requests:
        memory: 512M
    devices:
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimName: myclaim
</code></pre></div>
<h4 id="enabling-cpu-compatibility-enforcement">Enabling cpu compatibility enforcement<a class="headerlink" href="#enabling-cpu-compatibility-enforcement" title="Permanent link">&para;</a></h4>
<p>To enable the CPU compatibility enforcement, the <code>CPUNodeDiscovery</code>
<a href="../../operations/activating_feature_gates/#how-to-activate-a-feature-gate">feature gates</a>
must be enabled in the KubeVirt CR.</p>
<p>This feature-gate allows kubevirt to take VM cpu model and cpu features
and create node selectors from them. With these node selectors, VM can
be scheduled on the node which can support VM cpu model and features.</p>
<h4 id="labeling-nodes-with-cpu-models-and-cpu-features">Labeling nodes with cpu models and cpu features<a class="headerlink" href="#labeling-nodes-with-cpu-models-and-cpu-features" title="Permanent link">&para;</a></h4>
<p>To properly label the node, user can use Kubevirt Node-labeller, which creates all 
necessary labels or create node labels by himself.</p>
<p>Kubevirt node-labeller creates 3 types of labels: cpu models, cpu features and kvm info.
It uses libvirt to get all supported cpu models and cpu
features on host and then Node-labeller creates labels from cpu models. 
Kubevirt can then schedule VM on node which has support for VM cpu model and
features.</p>
<p>Node-labeller supports obsolete list of cpu models and minimal baseline
cpu model for features. Both features can be set via KubeVirt CR:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="go">    apiVersion: kubevirt.io/v1</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="go">    kind: Kubevirt</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="go">    metadata:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="go">      name: kubevirt</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="go">      namespace: kubevirt</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="go">    spec:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">      ...</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="go">      configuration:</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="go">        obsoleteCPUModels:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">          486: true</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="go">          pentium: true</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="go">    ...</span>
</code></pre></div>
<p>Obsolete cpus will not be inserted in labels. If KubeVirt CR doesn't 
contain <code>obsoleteCPUModels</code> variable, Labeller sets default values
("pentium, pentium2, pentium3, pentiumpro, coreduo, n270, 
core2duo, Conroe, athlon, phenom, kvm32, kvm64, qemu32 and qemu64").</p>
<p>User can change obsoleteCPUModels by adding / removing cpu model in config map.
Kubevirt then update nodes with new labels.</p>
<p>For homogenous cluster / clusters without live migration enabled it's possible
to disable the node labeler and avoid adding labels to the nodes by adding the 
following annotation to the nodes:</p>
<p><code>node-labeller.kubevirt.io/skip-node</code>.</p>
<h4 id="model">Model<a class="headerlink" href="#model" title="Permanent link">&para;</a></h4>
<p><strong>Note</strong>: If CPU model wasn't defined, the VM will have CPU model
closest to one that used on the node where the VM is running.</p>
<p><strong>Note</strong>: CPU model is case sensitive.</p>
<p>Setting the CPU model is possible via <code>spec.domain.cpu.model</code>. The
following VM will have a CPU with the <code>Conroe</code> model:</p>
<div class="highlight"><pre><span></span><code>apiVersion: kubevirt.io/v1
kind: VirtualMachineInstance
metadata:
  name: myvmi
spec:
  domain:
    cpu:
      # this sets the CPU model
      model: Conroe
...
</code></pre></div>
<p>You can check list of available models
<a href="https://github.com/libvirt/libvirt/blob/master/src/cpu_map/index.xml">here</a>.</p>
<p>When CPUNodeDiscovery feature-gate is enabled and VM has cpu model,
Kubevirt creates node selector with format:
<code>cpu-model.node.kubevirt.io/&lt;cpuModel&gt;</code>, e.g.
<code>cpu-model.node.kubevirt.io/Conroe</code>. When VM doesn’t have cpu
model, then no node selector is created.</p>
<h4 id="enabling-default-cluster-cpu-model">Enabling default cluster cpu model<a class="headerlink" href="#enabling-default-cluster-cpu-model" title="Permanent link">&para;</a></h4>
<p>To enable the default cpu model, user may add the <code>cpuModel</code>
field in the KubeVirt CR.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>    apiVersion: kubevirt.io/v1
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    kind: KubeVirt
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    metadata:
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>      name: kubevirt
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>      namespace: kubevirt
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    spec:
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>      ...
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>      configuration:
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>        cpuModel: &quot;EPYC&quot;
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    ...
</code></pre></div>
<p>Default CPU model is set when vmi doesn't have any cpu model. When vmi
has cpu model set, then vmi's cpu model is preferred. When default cpu
model is not set and vmi's cpu model is not set too, <code>host-model</code> will
be set. Default cpu model can be changed when kubevirt is running. When
CPUNodeDiscovery feature gate is enabled Kubevirt creates node selector
with default cpu model.</p>
<h4 id="cpu-model-special-cases">CPU model special cases<a class="headerlink" href="#cpu-model-special-cases" title="Permanent link">&para;</a></h4>
<p>As special cases you can set <code>spec.domain.cpu.model</code> equals to: -
<code>host-passthrough</code> to passthrough CPU from the node to the VM</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    cpu:
      # this passthrough the node CPU to the VM
      model: host-passthrough
...
</code></pre></div>
<ul>
<li><code>host-model</code> to get CPU on the VM close to the node one</li>
</ul>
<!-- -->

<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    cpu:
      # this set the VM CPU close to the node one
      model: host-model
...
</code></pre></div>
<p>See the <a href="https://libvirt.org/formatdomain.html#elementsCPU">CPU API
reference</a> for more
details.</p>
<h3 id="features">Features<a class="headerlink" href="#features" title="Permanent link">&para;</a></h3>
<p>Setting CPU features is possible via <code>spec.domain.cpu.features</code> and can
contain zero or more CPU features :</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    cpu:
      # this sets the CPU features
      features:
      # this is the feature&#39;s name
      - name: &quot;apic&quot;
      # this is the feature&#39;s policy
       policy: &quot;require&quot;
...
</code></pre></div>
<p><strong>Note</strong>: Policy attribute can either be omitted or contain one of the
following policies: force, require, optional, disable, forbid.</p>
<p><strong>Note</strong>: In case a policy is omitted for a feature, it will default to
<strong>require</strong>.</p>
<p>Behaviour according to Policies:</p>
<ul>
<li>All policies will be passed to libvirt during virtual machine
    creation.</li>
<li>In case the feature gate "CPUNodeDiscovery" is enabled and the
    policy is omitted or has "require" value, then the virtual machine
    could be scheduled only on nodes that support this feature.</li>
<li>In case the feature gate "CPUNodeDiscovery" is enabled and the
    policy has "forbid" value, then the virtual machine would <strong>not</strong> be
    scheduled on nodes that support this feature.</li>
</ul>
<p>Full description about features and policies can be found
<a href="https://libvirt.org/formatdomain.html#elementsCPU">here</a>.</p>
<p>When CPUNodeDiscovery feature-gate is enabled Kubevirt creates node
selector from cpu features with format:
<code>cpu-feature.node.kubevirt.io/&lt;cpuFeature&gt;</code>, e.g.
<code>cpu-feature.node.kubevirt.io/apic</code>. When VM doesn’t have cpu
feature, then no node selector is created.</p>
<h3 id="clock">Clock<a class="headerlink" href="#clock" title="Permanent link">&para;</a></h3>
<h4 id="guest-time">Guest time<a class="headerlink" href="#guest-time" title="Permanent link">&para;</a></h4>
<p>Sets the virtualized hardware clock inside the VM to a specific time.
Available options are</p>
<ul>
<li>
<p><strong>utc</strong></p>
</li>
<li>
<p><strong>timezone</strong></p>
</li>
</ul>
<p>See the <a href="https://kubevirt.github.io/api-reference/master/definitions.html#_v1_clock">Clock API
Reference</a>
for all possible configuration options.</p>
<h4 id="utc">utc<a class="headerlink" href="#utc" title="Permanent link">&para;</a></h4>
<p>If <code>utc</code> is specified, the VM's clock will be set to UTC.</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    clock:
      utc: {}
    resources:
      requests:
        memory: 512M
    devices:
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimName: myclaim
</code></pre></div>
<h4 id="timezone">timezone<a class="headerlink" href="#timezone" title="Permanent link">&para;</a></h4>
<p>If <code>timezone</code> is specified, the VM's clock will be set to the specified
local time.</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    clock:
      timezone: &quot;America/New York&quot;
    resources:
      requests:
        memory: 512M
    devices:
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimName: myclaim
</code></pre></div>
<h4 id="timers">Timers<a class="headerlink" href="#timers" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p><strong>pit</strong></p>
</li>
<li>
<p><strong>rtc</strong></p>
</li>
<li>
<p><strong>kvm</strong></p>
</li>
<li>
<p><strong>hyperv</strong></p>
</li>
</ul>
<p>A pretty common timer configuration for VMs looks like this:</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    clock:
      utc: {}
      # here are the timer
      timer:
        hpet:
          present: false
        pit:
          tickPolicy: delay
        rtc:
          tickPolicy: catchup
        hyperv: {}
    resources:
      requests:
        memory: 512M
    devices:
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimName: myclaim
</code></pre></div>
<p><code>hpet</code> is disabled,<code>pit</code> and <code>rtc</code> are configured to use a specific
<code>tickPolicy</code>. Finally, <code>hyperv</code> is made available too.</p>
<p>See the <a href="https://kubevirt.github.io/api-reference/master/definitions.html#_v1_timer">Timer API
Reference</a>
for all possible configuration options.</p>
<p><strong>Note</strong>: Timer can be part of a machine type. Thus it may be necessary
to explicitly disable them. We may in the future decide to add them via
cluster-level defaulting, if they are part of a QEMU machine definition.</p>
<h3 id="random-number-generator-rng">Random number generator (RNG)<a class="headerlink" href="#random-number-generator-rng" title="Permanent link">&para;</a></h3>
<p>You may want to use entropy collected by your cluster nodes inside your
guest. KubeVirt allows to add a <code>virtio</code> RNG device to a virtual machine
as follows.</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: vmi-with-rng
spec:
  domain:
    devices:
      rng: {}
</code></pre></div>
<p>For Linux guests, the <code>virtio-rng</code> kernel module should be loaded early
in the boot process to acquire access to the entropy source. Other
systems may require similar adjustments to work with the <code>virtio</code> RNG
device.</p>
<p><strong>Note</strong>: Some guest operating systems or user payloads may require the
RNG device with enough entropy and may fail to boot without it. For
example, fresh Fedora images with newer kernels (4.16.4+) may require
the <code>virtio</code> RNG device to be present to boot to login.</p>
<h3 id="video-and-graphics-device">Video and Graphics Device<a class="headerlink" href="#video-and-graphics-device" title="Permanent link">&para;</a></h3>
<p>By default a minimal Video and Graphics device configuration will be
applied to the VirtualMachineInstance. The video device is <code>vga</code>
compatible and comes with a memory size of 16 MB. This device allows
connecting to the OS via <code>vnc</code>.</p>
<p>It is possible not attach it by setting
<code>spec.domain.devices.autoattachGraphicsDevice</code> to <code>false</code>:</p>
<div class="highlight"><pre><span></span><code>metadata:
  name: myvmi
spec:
  domain:
    devices:
      autoattachGraphicsDevice: false
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimName: myclaim
</code></pre></div>
<p>VMIs without graphics and video devices are very often referenced as
<code>headless</code> VMIs.</p>
<p>If using a huge amount of small VMs this can be helpful to increase the
VMI density per node, since no memory needs to be reserved for video.</p>
<h3 id="features_1">Features<a class="headerlink" href="#features_1" title="Permanent link">&para;</a></h3>
<p>KubeVirt supports a range of virtualization features which may be
tweaked in order to allow non-Linux based operating systems to properly
boot. Most noteworthy are</p>
<ul>
<li>
<p><strong>acpi</strong></p>
</li>
<li>
<p><strong>apic</strong></p>
</li>
<li>
<p><strong>hyperv</strong></p>
</li>
</ul>
<p>A common feature configuration is shown by the following example:</p>
<div class="highlight"><pre><span></span><code>apiVersion: kubevirt.io/v1
kind: VirtualMachineInstance
metadata:
  name: myvmi
spec:
  domain:
    # typical features
    features:
      acpi: {}
      apic: {}
      hyperv:
        relaxed: {}
        vapic: {}
        spinlocks:
          spinlocks: 8191
    resources:
      requests:
        memory: 512M
    devices:
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimname: myclaim
</code></pre></div>
<p>See the <a href="https://kubevirt.github.io/api-reference/master/definitions.html#_v1_features">Features API
Reference</a>
for all available features and configuration options.</p>
<h2 id="resources-requests-and-limits">Resources Requests and Limits<a class="headerlink" href="#resources-requests-and-limits" title="Permanent link">&para;</a></h2>
<p>An optional resource request can be specified by the users to allow the
scheduler to make a better decision in finding the most suitable Node to
place the VM.</p>
<div class="highlight"><pre><span></span><code>apiVersion: kubevirt.io/v1
kind: VirtualMachineInstance
metadata:
  name: myvmi
spec:
  domain:
    resources:
      requests:
        memory: &quot;1Gi&quot;
        cpu: &quot;1&quot;
      limits:
        memory: &quot;2Gi&quot;
        cpu: &quot;2&quot;
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimname: myclaim
</code></pre></div>
<h3 id="cpu_1">CPU<a class="headerlink" href="#cpu_1" title="Permanent link">&para;</a></h3>
<p>Specifying CPU limits will determine the amount of <em>cpu</em> <em>shares</em> set on
the control group the VM is running in, in other words, the amount of
time the VM's CPUs can execute on the assigned resources when there is a
competition for CPU resources.</p>
<p>For more information please refer to <a href="https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/#how-pods-with-resource-limits-are-run">how Pods with resource limits are
run</a>.</p>
<h3 id="memory-overhead">Memory Overhead<a class="headerlink" href="#memory-overhead" title="Permanent link">&para;</a></h3>
<p>Various VM resources, such as a video adapter, IOThreads, and
supplementary system software, consume additional memory from the Node,
beyond the requested memory intended for the guest OS consumption. In
order to provide a better estimate for the scheduler, this memory
overhead will be calculated and added to the requested memory.</p>
<p>Please see <a href="https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/#how-pods-with-resource-requests-are-scheduled">how Pods with resource requests are
scheduled</a>
for additional information on resource requests and limits.</p>
<h3 id="hugepages">Hugepages<a class="headerlink" href="#hugepages" title="Permanent link">&para;</a></h3>
<p>KubeVirt give you possibility to use hugepages as backing memory for
your VM. You will need to provide desired amount of memory
<code>resources.requests.memory</code> and size of hugepages to use
<code>memory.hugepages.pageSize</code>, for example for x86_64 architecture it can
be <code>2Mi</code>.</p>
<div class="highlight"><pre><span></span><code>apiVersion: kubevirt.io/v1alpha1
kind: VirtualMachine
metadata:
  name: myvm
spec:
  domain:
    resources:
      requests:
        memory: &quot;64Mi&quot;
    memory:
      hugepages:
        pageSize: &quot;2Mi&quot;
    disks:
    - name: myimage
      disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimname: myclaim
</code></pre></div>
<p>In the above example the VM will have <code>64Mi</code> of memory, but instead of
regular memory it will use node hugepages of the size of <code>2Mi</code>.</p>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>a node must have pre-allocated hugepages</p>
</li>
<li>
<p>hugepages size cannot be bigger than requested memory</p>
</li>
<li>
<p>requested memory must be divisible by hugepages size</p>
</li>
<li>
<p>hugepages uses by default memfd. Memfd is supported from kernel &gt;= 4.14. If you run on an older host (e.g centos 7.9), it is required to disable memfd with the annotation <code>kubevirt.io/memfd: "false"</code> in the VMI metadata annotation.</p>
</li>
</ul>
<h2 id="input-devices">Input Devices<a class="headerlink" href="#input-devices" title="Permanent link">&para;</a></h2>
<h3 id="tablet">Tablet<a class="headerlink" href="#tablet" title="Permanent link">&para;</a></h3>
<p>Kubevirt supports input devices. The only type which is supported is
<code>tablet</code>. Tablet input device supports only <code>virtio</code> and <code>usb</code> bus. Bus
can be empty. In that case, <code>usb</code> will be selected.</p>
<div class="highlight"><pre><span></span><code>apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: myvm
spec:
  domain:
    devices:
      inputs:
      - type: tablet
        bus: virtio
        name: tablet1
      disks:
      - name: myimage
        disk: {}
  volumes:
    - name: myimage
      persistentVolumeClaim:
        claimname: myclaim
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../presets/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Presets" rel="prev">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Presets
              </div>
            </div>
          </a>
        
        
          
          <a href="../dedicated_cpu_resources/" class="md-footer__link md-footer__link--next" aria-label="Next: Dedicated CPU resources" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Dedicated CPU resources
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "content.action.view", "content.action.edit"], "search": "../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>